<mxfile host="drawio-plugin" modified="2025-11-17T21:35:11.237Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36" etag="tGn5qEsYB2QH4kTJIm6j" version="22.1.22" type="embed">
  <diagram name="InsureTech_технологическая архитектура_to-be" id="insuretech-to-be">
    <mxGraphModel dx="132095" dy="97879" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="cloud" value="&lt;font style=&quot;font-size: 20px&quot;&gt;Yandex Cloud&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-4040" y="-880" width="1310" height="840" as="geometry" />
        </mxCell>
        <mxCell id="az1" value="&lt;font style=&quot;font-size: 18px&quot;&gt;Зона доступности 1&lt;br&gt;(Москва)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fillColor=#e3ebff;" parent="1" vertex="1">
          <mxGeometry x="-3910" y="-790" width="460" height="630" as="geometry" />
        </mxCell>
        <mxCell id="az2" value="&lt;font style=&quot;font-size: 18px&quot;&gt;Зона доступности 2&lt;br&gt;(Санкт-Петербург)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=none;fillColor=#e3ebff;" parent="1" vertex="1">
          <mxGeometry x="-3308" y="-790" width="470" height="630" as="geometry" />
        </mxCell>
        <mxCell id="alb" value="&lt;font style=&quot;font-size: 16px&quot;&gt;Yandex Application Load Balancer&lt;br&gt;(Geolocation + Health Check)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3490" y="-870" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k8s1" value="&lt;font style=&quot;font-size: 16px&quot;&gt;Kubernetes cluster 1&lt;br&gt;InsureTech namespace&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#5282ff;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3860" y="-710" width="380" height="120" as="geometry" />
        </mxCell>
        <mxCell id="k8s2" value="&lt;font style=&quot;font-size: 16px&quot;&gt;Kubernetes cluster 2&lt;br&gt;InsureTech namespace&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#5282ff;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3280" y="-710" width="380" height="120" as="geometry" />
        </mxCell>
        <mxCell id="apisix1" value="&lt;font style=&quot;font-size: 15px&quot;&gt;APISIX (API Gateway)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3840" y="-570" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="apisix2" value="&lt;font style=&quot;font-size: 15px&quot;&gt;APISIX (API Gateway)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3260" y="-570" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="consul1" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Consul&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3620" y="-570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="consul2" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Consul&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3040" y="-570" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="pg1" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Yandex Managed PostgreSQL&lt;br&gt;(master, RPO &amp;lt;= 15 мин)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3870" y="-410" width="380" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pg2" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Yandex Managed PostgreSQL&lt;br&gt;(async replica)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3274" y="-420" width="380" height="80" as="geometry" />
        </mxCell>
        <mxCell id="redis1" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Redis (кэш)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3765" y="-300" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="redis2" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Redis (кэш)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#ff5958;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3149" y="-320" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="monitoring" value="&lt;font style=&quot;font-size: 15px&quot;&gt;ELK + Prometheus/Grafana&lt;br&gt;(централизованная система)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#5282ff;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3500" y="-150" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="backup" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Object Storage&lt;br&gt;(резервные копии каждые 15 мин)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#5282ff;fillColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="-3210" y="-145" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="alb" target="apisix1" edge="1" />
        <mxCell id="e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="alb" target="apisix2" edge="1" />
        <mxCell id="e3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="apisix1" target="consul1" edge="1" />
        <mxCell id="e4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="apisix2" target="consul2" edge="1" />
        <mxCell id="e5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="k8s1" target="monitoring" edge="1" />
        <mxCell id="e6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="k8s2" target="monitoring" edge="1" />
        <mxCell id="e7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="pg1" target="backup" edge="1" />
        <mxCell id="e8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="pg2" target="backup" edge="1" />
        <mxCell id="e9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="pg1" target="pg2" edge="1" />
        <mxCell id="e10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="k8s1" target="redis1" edge="1" />
        <mxCell id="e11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="k8s2" target="redis2" edge="1" />
        <mxCell id="e12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="k8s1" target="pg1" edge="1" />
        <mxCell id="e13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" parent="1" source="k8s2" target="pg2" edge="1" />
        <mxCell id="label_rep" value="&lt;font style=&quot;font-size: 14px&quot;&gt;Async replication&lt;br&gt;(RPO &amp;lt;= 15 мин)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-3430" y="-650" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hc1" value="&lt;font style=&quot;font-size: 13px&quot;&gt;Health check&lt;br&gt;/health&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-3730" y="-770" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hc2" value="&lt;font style=&quot;font-size: 13px&quot;&gt;Health check&lt;br&gt;/health&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-3130" y="-770" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="note" value="&lt;font style=&quot;font-size: 15px&quot;&gt;&amp;bull; Независимые кластеры для RTO = 45 мин, RPO = 15 мин&lt;br&gt;&amp;bull; Шардирование БД не требуется (объём = 50 ГБ)&lt;br&gt;&amp;bull; Равномерная загрузка благодаря ALB с геолокацией&lt;br&gt;&amp;bull; Все компоненты дублируются для отказоустойчивости&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-3960" y="-140" width="440" height="170" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
